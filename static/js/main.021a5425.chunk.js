(this["webpackJsonpkdavh-work.github.io"]=this["webpackJsonpkdavh-work.github.io"]||[]).push([[0],{268:function(e,n){},310:function(e,n){},348:function(e,n,t){},349:function(e,n,t){},350:function(e,n,t){"use strict";t.r(n);var o=t(6),a=t.n(o),r=t(169),i=t(20),c=t(30),s=t.n(c),l=t(170),d=t.n(l),u=t(171),g=t.n(u),h=(t(348),function(e){return e[Math.floor(Math.random()*e.length)]}),p=window.localStorage.getItem("blockstackUser");p||(p=h(["Abrasive","Brash","Callous","Daft","Eccentric","Fiesty","Golden","Holy","Ignominious","Joltin","Killer","Luscious","Mushy","Nasty","OldSchool","Pompous","Quiet","Rowdy","Sneaky","Tawdry","Unique","Vivacious","Wicked","Xenophobic","Yawning","Zesty"])+h(["Anna","Bobby","Cameron","Danny","Emmett","Frida","Gracie","Hannah","Isaac","Jenova","Kendra","Lando","Mufasa","Nate","Owen","Penny","Quincy","Roddy","Samantha","Tammy","Ulysses","Victoria","Wendy","Xander","Yolanda","Zelda"])+h(["Anchorage","Berlin","Cucamonga","Davenport","Essex","Fresno","Gunsight","Hanover","Indianapolis","Jamestown","Kane","Liberty","Minneapolis","Nevis","Oakland","Portland","Quantico","Raleigh","SaintPaul","Tulsa","Utica","Vail","Warsaw","XiaoJin","Yale","Zimmerman"]),window.localStorage.setItem("blockstackUser",p)),console.log("Segment Identify: "+p),window.analytics.identify(p);var y=p,f=(t(349),t(8)),v=t(70),k=t(71),m=function(){function e(){Object(v.a)(this,e)}return Object(k.a)(e,null,[{key:"findDraggingSignificance",value:function(e){if(e.length-1<1)return null;console.log("Analyzing dragging state",e);var n=e[e.length-1],t=e[e.length-2],o=this.calcChange(n,t);return o.speed>200?(console.log("User is yanking a shape around."),{type:"Yanking",parameters:{speed:o.speed}}):null}},{key:"findDroppedSignificance",value:function(e){if(e.length-1<1)return null;var n=e[e.length-1],t=e[0],o=e[1],a=this.calcChange(n,t).speed/e.length,r=t.yPos-n.yPos,i=t.yPos-o.yPos;return console.log("Analyzing dropped state",e),console.log(a),console.log(r),console.log(!(e.length%3)),i<-80?(console.log("User has simply dropped something."),{type:"JustDropped",parameters:{}}):!(e.length%3)&&a<10&&r>-4?(console.log("User has stacked something."),{type:"Stacked",parameters:{}}):r<-20?(console.log("User has made something fall."),{type:"Falling",parameters:{}}):null}},{key:"calcChange",value:function(e,n){var t=e.xPos-n.xPos,o=e.yPos-n.yPos;return{x:t,y:o,speed:Math.pow(Math.pow(t,2)+Math.pow(o,2),.5)}}}]),e}(),b=function(){function e(){Object(v.a)(this,e)}return Object(k.a)(e,null,[{key:"dragStarted",value:function(e,n){var t=this;this.draggingState=[this.bodyToData(n)],window.clearInterval(this.trackDragging),this.trackDragging=window.setInterval((function(){var o=f.Composite.get(e,n.id,"body");t.draggingState.push(t.bodyToData(o));var a=m.findDraggingSignificance(t.draggingState);a&&(window.analytics.track(a.type,a.parameters),console.log("Tracked:"),console.table(a)),(t.draggingState.length>9||t.shouldStopTracking(a))&&window.clearInterval(t.trackDragging)}),500)}},{key:"dragEnded",value:function(e,n){var t=this;this.draggingState=[],window.clearInterval(this.trackDragging),this.droppedState=[this.bodyToData(n)],window.clearInterval(this.trackDropped),this.trackDropped=window.setInterval((function(){var o=f.Composite.get(e,n.id,"body");t.droppedState.push(t.bodyToData(o));var a=m.findDroppedSignificance(t.droppedState);a&&(window.analytics.track(a.type,a.parameters),console.log("Tracked:"),console.table(a)),(t.droppedState.length>9||t.shouldStopTracking(a))&&window.clearInterval(t.trackDropped)}),1e3)}},{key:"bodyToData",value:function(e){return{xPos:e.position.x,yPos:e.position.y}}},{key:"shouldStopTracking",value:function(e){return console.log(null===e||void 0===e?void 0:e.type),"Falling"===(null===e||void 0===e?void 0:e.type)||"JustDropped"===(null===e||void 0===e?void 0:e.type)}}]),e}();b.draggingState=[],b.droppedState=[],b.trackDragging=void 0,b.trackDropped=void 0;var w=t(172),x=t.n(w);window.decomp=x.a;var S=100,C=function(){var e=Object(c.useRef)(null),n=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(null!==e.current){var t=e.current.offsetWidth,o=e.current.offsetHeight,a=t/2,r=a-240,i=f.Engine.create(),c=i.world,s=f.Render.create({element:e.current||void 0,engine:i,canvas:n.current||void 0,options:{width:t,height:o,background:"rgba(255, 0, 0, 0.5)",wireframes:!1}});f.Render.run(s);var l=f.Runner.create();f.Runner.run(l,i),f.World.add(c,[f.Bodies.rectangle(a,o,t,S,{isStatic:!0}),f.Bodies.rectangle(-50,o/2,S,1e4,{isStatic:!0}),f.Bodies.rectangle(t+50,o/2,S,1e4,{isStatic:!0})]);var d=[{x:80,y:0},{x:80,y:80},{x:0,y:80},{x:0,y:0}],u=[{x:40,y:0},{x:40,y:20},{x:100,y:20},{x:100,y:80},{x:40,y:80},{x:40,y:100},{x:0,y:50}],g=[{x:100,y:0},{x:75,y:50},{x:100,y:100},{x:25,y:100},{x:0,y:50},{x:25,y:0}],h=[{x:50,y:0},{x:63,y:38},{x:100,y:38},{x:69,y:59},{x:82,y:100},{x:50,y:75},{x:18,y:100},{x:31,y:59},{x:0,y:38},{x:37,y:38}],p=f.Composites.stack(r,50,6,4,0,0,(function(e,n){var t=f.Common.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]);return f.Bodies.fromVertices(e,n,f.Common.choose([d,d,u,g,h]),{render:{fillStyle:t,strokeStyle:t,lineWidth:1}},!0)}));f.World.add(c,p);var y=f.Mouse.create(s.canvas),v=f.MouseConstraint.create(i,{mouse:y,constraint:{stiffness:.2,render:{visible:!1}}});f.World.add(c,v),s.mouse=y,f.Events.on(v,"enddrag",(function(e){b.dragEnded(p,e.body)})),f.Events.on(v,"startdrag",(function(e){b.dragStarted(p,e.body)})),f.Engine.run(i)}}),[]),Object(i.jsx)("div",{ref:e,style:{width:"100%",height:"100%"},children:Object(i.jsx)("canvas",{ref:n})})};var j,D,T=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:"Stack the blocks :D !"}),Object(i.jsx)("div",{className:"App-content",children:Object(i.jsx)(C,{})})]})},O=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,351)).then((function(n){var t=n.getCLS,o=n.getFID,a=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),o(e),a(e),r(e),i(e)}))},P="https://kdavh-github-io-prod-9942.twil.io",I="general";function E(e){return B.apply(this,arguments)}function B(){return(B=Object(r.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMemberByIdentity(y);case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,n.join();case 9:console.log('Joined channel as <span class="me">'+y+"</span>.",!0);case 10:n.on("messageAdded",(function(e){console.log("New message, yay!!"),console.log(e.author,e.body);var n=document.querySelector("#comment-space");n&&(n.innerHTML="<div>".concat(e.body,"</div>"))}));case 11:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function F(e){console.log("Token about to expire"),fetch("".concat(P,"/token?blockchatUser=").concat(y)).then((function(e){return e.json()})).then((function(e){j.updateToken(e.token)}))}d.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(T,{})}),document.getElementById("root")),fetch("".concat(P,"/token?blockchatUser=").concat(y)).then((function(e){return e.json()})).then((function(e){console.log("Received token response:"),console.log(e),g.a.create(e.token).then((function(e){console.log("Created chat client"),(j=e).getSubscribedChannels().then((function(){return function(e){return e.getChannelByUniqueName(I).then((function(e){D=e,console.log("Found general channel:"),console.log(D),E(D)})).catch((function(){console.log("Creating general channel"),e.createChannel({uniqueName:I,friendlyName:"The Chat Channel"}).then((function(e){return console.log("Created general channel:"),console.log(e),E(D=e)})).catch((function(e){console.log("Channel could not be created:"),console.log(e)}))}))}(j)})),j.on("tokenAboutToExpire",(function(){F()})),j.on("tokenExpired",(function(){F()})),console.log('You have been assigned a random username of: <span class="me">'+y+"</span>",!0)})).catch((function(e){console.error(e),console.log("There was an error creating the chat client:<br/>"+e,!0),console.log("Please check your .env file.",!1)}))})),O()}},[[350,1,2]]]);
//# sourceMappingURL=main.021a5425.chunk.js.map